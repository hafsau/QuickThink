<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Quick Think - Controller</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Splash Screen -->
    <div id="splash-screen" class="screen active">
      <div class="splash-content">
        <div class="splash-logo">
          <div class="logo-bolt">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="currentColor">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
            </svg>
          </div>
          <h1 class="splash-title">QUICK THINK</h1>
          <p class="splash-tagline">The party game of fast thinking!</p>
        </div>

        <div class="tutorial-steps-mobile">
          <div class="tutorial-step-mobile">
            <span class="step-num">1</span>
            <span>Category appears</span>
          </div>
          <div class="tutorial-step-mobile">
            <span class="step-num">2</span>
            <span>Type answers fast!</span>
          </div>
          <div class="tutorial-step-mobile">
            <span class="step-num">3</span>
            <span>Unique = Points!</span>
          </div>
        </div>

        <button id="splash-continue-btn" class="splash-btn">LET'S PLAY!</button>
        <p class="splash-auto-advance">Starting in <span id="splash-countdown">10</span>s...</p>
      </div>
    </div>

    <!-- Join Screen -->
    <div id="join-screen" class="screen">
      <div class="join-content">
        <h1 class="game-title">QUICK THINK</h1>
        <p class="tagline">Name it before the buzzer!</p>

        <div class="join-form">
          <input
            type="text"
            id="room-code-input"
            placeholder="Room Code"
            maxlength="4"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="characters"
            style="display: none;"
          />
          <input
            type="text"
            id="player-name"
            placeholder="Your Name"
            maxlength="12"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="words"
          />
          <button id="join-btn" class="join-btn" disabled>JOIN GAME</button>
        </div>

        <p class="room-info">Room: <span id="room-code">----</span></p>
      </div>
    </div>

    <!-- Waiting Screen -->
    <div id="waiting-screen" class="screen">
      <button id="settings-btn" class="settings-btn" title="Settings">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
      </button>
      <div class="waiting-content">
        <div class="player-avatar-large" id="player-avatar"></div>
        <h2 id="player-display-name"></h2>
        <p class="host-status" id="host-status"></p>
        <button id="transfer-host-btn" class="transfer-host-btn hidden">Transfer Host</button>
        <div class="waiting-animation">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
        <p class="waiting-text">Watch the TV screen!</p>
      </div>

      <!-- Settings Panel -->
      <div id="settings-panel" class="settings-panel hidden">
        <div class="settings-header">
          <h3>Settings</h3>
          <button id="close-settings-btn" class="close-settings-btn">&times;</button>
        </div>
        <div class="settings-content">
          <div class="settings-option stacked">
            <label>Music</label>
            <button id="music-toggle" class="toggle-btn active">ON</button>
          </div>
          <div class="settings-option stacked">
            <label>Typing Time</label>
            <div class="timer-options">
              <button class="timer-btn" data-time="5">5s</button>
              <button class="timer-btn active" data-time="10">10s</button>
              <button class="timer-btn" data-time="15">15s</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Transfer Host Modal -->
      <div id="transfer-modal" class="transfer-modal hidden">
        <div class="transfer-header">
          <h3>Transfer Host</h3>
          <button id="close-transfer-btn" class="close-transfer-btn">&times;</button>
        </div>
        <div class="transfer-content">
          <p>Select a player to become host:</p>
          <div id="player-list" class="player-list">
            <!-- Players will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>

    <!-- Get Ready Screen -->
    <div id="ready-screen" class="screen">
      <div class="ready-content">
        <div class="category-display" id="ready-category"></div>
        <div class="countdown-display" id="ready-countdown">3</div>
        <p class="ready-text">GET READY!</p>
      </div>
    </div>

    <!-- Typing Screen -->
    <div id="typing-screen" class="screen">
      <div class="typing-content">
        <div class="typing-header">
          <div class="category-small" id="typing-category"></div>
          <div class="timer-display" id="timer-display">10</div>
        </div>

        <div class="input-container">
          <input
            type="text"
            id="answer-input"
            placeholder="Type an answer, press Enter"
            maxlength="50"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
          />
          <div class="entry-hint">Press Enter to add</div>
        </div>

        <!-- Encouragement message -->
        <div id="encouragement-msg" class="encouragement-msg"></div>

        <!-- Entry list container -->
        <div class="entries-list" id="entries-list">
          <!-- Entries will be added here dynamically -->
        </div>

        <div class="entries-count">
          <span id="entry-count">0</span> answers added
        </div>

        <p class="typing-hint">More unique answers = more points!</p>
      </div>
    </div>

    <!-- Locked Screen -->
    <div id="locked-screen" class="screen">
      <div class="locked-content">
        <div class="lock-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
        </div>
        <h2>Answers Submitted!</h2>
        <div class="submitted-entries" id="submitted-entries">
          <!-- List of submitted entries will appear here -->
        </div>
        <p class="watch-tv">Watch the TV for results...</p>
      </div>
    </div>

    <!-- Reveal Screen -->
    <div id="reveal-screen" class="screen">
      <div class="reveal-content">
        <div class="eye-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
        </div>
        <h2>Revealing Answers...</h2>
        <p class="watch-tv">Watch the TV!</p>
      </div>
    </div>

    <!-- Audit Screen (watching host review) -->
    <div id="audit-screen" class="screen">
      <div class="audit-content">
        <div class="gavel-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2l6 6-2 2-6-6 2-2z"></path>
            <path d="M4 14l6 6-2 2-6-6 2-2z"></path>
            <line x1="14" y1="10" x2="10" y2="14"></line>
            <line x1="2" y1="22" x2="22" y2="22"></line>
          </svg>
        </div>
        <h2>Host Review</h2>
        <p class="watch-tv">Watch the TV for challenged answers...</p>
      </div>
    </div>

    <!-- Voting Screen -->
    <div id="voting-screen" class="screen">
      <div class="voting-content">
        <div class="voting-header">
          <div class="voting-timer" id="voting-timer">10</div>
          <h2>VOTE!</h2>
        </div>
        <div class="voting-question">
          <p>Does this answer match the category?</p>
          <div class="voting-category" id="vote-category"></div>
        </div>
        <div class="voting-answer-display">
          <div class="vote-player-name" id="vote-player-name"></div>
          <div class="vote-answer-text" id="vote-answer-text"></div>
        </div>
        <div class="voting-buttons">
          <button id="vote-valid-btn" class="vote-btn valid">
            <span class="vote-icon">✓</span>
            <span>VALID</span>
          </button>
          <button id="vote-invalid-btn" class="vote-btn invalid">
            <span class="vote-icon">✗</span>
            <span>INVALID</span>
          </button>
        </div>
        <div id="vote-submitted-msg" class="vote-submitted-msg">Vote submitted!</div>
        <div id="own-answer-msg" class="own-answer-msg">This is your answer - you cannot vote</div>
      </div>
    </div>

    <!-- Score Screen -->
    <div id="score-screen" class="screen">
      <div class="score-content">
        <h2>Your Score</h2>
        <div class="my-score" id="my-score">0</div>
        <div class="round-result" id="round-result"></div>
        <p class="watch-tv">Next round coming up...</p>
      </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameover-screen" class="screen">
      <div class="gameover-content">
        <h2 id="result-message">GAME OVER!</h2>
        <div class="final-score" id="final-score">0</div>
        <p class="final-label">Final Score</p>
        <div class="play-again-hint">Wait for host to start new game</div>
      </div>
    </div>

    <!-- Connection Error -->
    <div id="error-screen" class="screen">
      <div class="error-content">
        <h2>Connection Lost</h2>
        <p>Trying to reconnect...</p>
        <div class="loader"></div>
      </div>
    </div>
  </div>

  <script src="/shared/wordValidation.js"></script>
  <script src="/shared/wordUtils.js"></script>
  <script src="app.js"></script>
</body>
</html>
